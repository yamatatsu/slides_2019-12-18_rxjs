import {
  CodeSurfer,
  CodeSurferColumns,
  Step,
} from "code-surfer";
import { github, vsDark } from "@code-surfer/themes";
import Demo from './src/Demo.jsx'
import Playground from './src/Playground.jsx'

export const theme = vsDark;

# rxjs instead of redux

やまたつ

つくばexpress.js #1

---

やまたつ

- CureApp
- 品質保証部 兼 エンジニア
- typescript, aws
- 取手在住

---

> 取手市は、行きは取手駅から、帰りは上野から必ず座れて、それほどの混雑もなく、PCを広げての学習時間を確保できるため、全子育てエンジニアの方にオススメしている住みやすい街です。

---

https://suumo.jp/chintai/ibaraki/ek_26740/

---

今日話すこと

- rxjs とは
- rxjs で redux してみる
- 思いの丈

---

# rxjs とは

---

<Playground />

---

### rxjsでreduxみたいなことしてみるデモ

<Demo />

---

<CodeSurfer>

```js file=./src/Demo.jsx title="redux風なrxjs" subtitle="50行足らず"
```

```diff 14:27 title="redux風なrxjs" subtitle="Reactはこんな感じ"
```

```diff 21:25 title="redux風なrxjs" subtitle="値表示したりcallback付けたり"
```

```diff 16:18 title="redux風なrxjs" subtitle="謎のhooksで値とcallback作ってる"
```

```diff 5:7 title="redux風なrxjs" subtitle="SubjectはActionとして使う"
```

```diff 5:7,16:17 title="redux風なrxjs" subtitle="useSubjectはActionを発火する関数を返す"
```

```diff 6[7:16],7[7:16],8:12 title="redux風なrxjs" subtitle="Actionが発火したらなんかする"
```

```diff 12[13:34] title="redux風なrxjs" subtitle="これ！Reducer！"
```

```diff 29:43 title="redux風なrxjs" subtitle="謎のhooksはまぁ何もしてないです"
```

</CodeSurfer>

---

### Reducerってなに？

`Array.prototype.reduce()` の第一引数のこと。

[MDNのArray.prototype.reduce()にも書いてある](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce)

---

```js
(State, Action) => State'
```

---

```js
(acc, n) => acc + n
```

---

# 完全に一致

---

# rxjsでreduxはできます。

---

# 何がしたかったの？

---

# イベント駆動

---

> イベント駆動は従来の「処理呼び出し」に比べて開放閉鎖原則の観点からとても優位。これは雑に言うとあとから処理を追加する際に既存コードに変更を与えないということ。rxjsがやりたかったわけではなくてこのイベント駆動がやりたかった。

---

> reduxはイベント駆動的であるが、middlewareでみるとイベント駆動的かつ型に強いものは限られる。redux-observable。どうせrxjsつかうならreduxいらんくない？rxって状態管理できるのでは？さらに観測可能箇所(Observable)が増えるほどに処理注入余地増えるのでは？フロントエンドファーストでバックエンドに対してデータ同期がしたかったのでこの特性は魅力的に見えた。

---

> でも正直rxにわか過ぎてrx辛い。ほんとに扱いきれるのかわからん。redux使わないべきなのか否かわからん。誰か教えて欲しい。壁打ちさせて欲しい。助けて欲しい。

---

## お客様の中にrxjs屋はおりませんか！？

---

# ご清聴ありがとうございました :bow:

code は[こちら](https://github.com/yamatatsu/slides_2019-12-18_rxjs)
